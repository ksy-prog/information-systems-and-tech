# Вопрос 4. Основы редактирования графических данных в прикладных программах
## Введение
Представление данных на экране компьютера в графической форме впервые было реализовано в середине XX века для крупных вычислительных систем, применявшихся в научных и военных целях. С развитием технологий цифровой обработки информация в виде изображений стала неотъемлемой частью большинства компьютерных систем, от персональных до серверных. Сегодня графические интерфейсы и обработка изображений — базовый компонент программного обеспечения, используемого в различных областях: от инженерии и науки до искусства и развлечений.

Компьютерная графика, как отдельная область информатики, изучает методы и средства создания, обработки и отображения изображений с применением программно-аппаратных комплексов. В неё входят различные виды графики, такие как растровая, векторная и фрактальная, а также специализированные направления — инженерная графика, веб-графика, компьютерная полиграфия.

Эффективное редактирование графических данных позволяет не только улучшать визуальное восприятие, но и проводить сложный анализ с использованием цифровых технологий. Перечисленные возможности нашли применение в медицинской диагностике, промышленном дизайне, научных вычислениях, мультимедийных проектах и многих других сферах.

## Раздел 1: Принципы и среды редактирования
### Глава 1.1: Разрушающее и неразрушающее редактирование
Редактирование графических данных можно условно разделить на два основных типа: разрушающее и неразрушающее, что отражает способ воздействия на исходное изображение и возможность восстановления первоначального состояния.

**Разрушающее редактирование** заключается в прямом изменении пикселей исходного изображения. Операции такого типа изменяют данные в файле без возможности восстановления исходного содержания без резервной копии. Например, применение фильтра размытия, изменение яркости или обрезка пикселей повлияют непосредственно на базовый растровый слой. Недостатком этого метода является потенциальная потеря информации, что ограничивает гибкость работы и требует аккуратного подхода при внесении изменений.

**Неразрушающее редактирование**, напротив, позволяет вносить изменения в изображение, сохраняющее исходные данные без повреждений. Этот способ реализуется с помощью слоев, корректирующих масок и применяемых эффектов, которые могут быть удалены или откорректированы в любой момент. Например, корректирующий слой яркости и контраста изменяет визуальное восприятие изображения, не затрагивая изначальные пиксели. Такая методика обеспечивает высокую степень контроля и возможности экспериментов без риска утраты качества.

В зависимости от выбранного метода редактирования меняется стратегия работы с изображениями и требования к программному обеспечению. Современные графические редакторы, такие как Adobe Photoshop или GIMP, предоставляют средства для комбинирования обоих типов редактирования.

### Глава 1.2: Классификация и обзор прикладных программ.
В современном мире существует множество программных средств, используемых для обработки и редактирования графических данных. Эти средства можно классифицировать по различным признакам, исходя из целей, функций и особенностей интерфейса.

**1. По характеру обработки данных**

— **Растровые редакторы** — программы, работающие с растровой графикой, где изображение состоит из множества пикселей. Основные представители: Adobe Photoshop, GIMP. Они используют растровую модель, что обеспечивает высокую детализацию изображений, но при масштабировании возможна потеря качества.

— **Векторные редакторы** — работают с векторной графикой, в основе которой лежат математические описания фигур (линий, кривых, многоугольников). Примеры: CorelDRAW, Adobe Illustrator. Эти программы позволяют масштабировать изображения без потери качества.

— **Фрактальные редакторы** — создают изображения с помощью алгоритмов фрактальной геометрии, широко применяются в научной визуализации и художественной графике.

**2. По области применения**

— **Растровая графика и обработка фотографий.** Одно из основных направлений — работа с растровыми изображениями, где каждая точка задаётся пикселем. Используется для обработки фотографий, сканированных изображений и рисунков. Программы: Adobe Photoshop, GIMP.

— **Векторная графика и дизайн.** Работа с графикой, основанной на математическом описании контуров и фигур. Применяется в создании логотипов, иллюстраций, инфографики и веб-дизайна. Основные программы: CorelDRAW, Adobe Illustrator, Inkscape.

— **Деловая и научная графика.** Используется для наглядного отображения данных через диаграммы, графики, схемы и чертежи. Часто интегрируется в офисные и научные приложения. Примеры: Microsoft Visio, Origin, Excel.

— **Полиграфия и подготовка к печати.** Программы для работы с изображениями, цветокоррекцией и версткой, предназначенные для производства печатной продукции. Примеры: Adobe InDesign, QuarkXPress.

## Раздел 2: Базовые операции коррекции изображений
### Глава 2.1: Тоновая коррекция (Яркость, Контраст, Гистограмма)

**Яркость изображения**

**Яркость** — это восприятие светлоты или тёмноты изображения. В цифровых изображениях яркость каждого пикселя определяется его интенсивностью, которая обычно задаётся числовым значением в диапазоне от 0 до 255 (для 8-битных изображений):
    
    > 0 соответствует черному цвету.
    
    > 255 — белому.

**Математическая модель коррекции яркости**

$$ I'(x, y) = I(x, y) + \Delta B $$

В случае, если результат выходит за границы диапазона (0–255), он нормализуется:

$$ I'(x, y) = \min(\max(I(x, y) + \Delta B, 0), 255) $$

где $I'(x, y)$ — скорректированный пиксель.

**Контраст изображения**

**Контраст** — это мера различия между светлыми и тёмными участками изображения. Высокий контрастaccentuates границы и детали, а низкий делает изображение более «плоским».

**Модель коррекции контраста**

Контраст регулируется путем умножения пикселя на коэффициент *k*, где *k* > 0:

$$ I'(x, y) = \alpha \cdot (I(x, y) - I_{avg}) + I_{avg} $$

или, в более простом виде:

$$ I'(x, y) = \text{clip}(\beta \cdot I(x, y), 0, 255) $$

где $\beta$ — коэффициент контрастности (например, 1.0 — без изменений, больше 1 — увеличение, меньше 1 — уменьшение), а функция $\text{clip}()$ ограничивает значения диапазоном 0–255.

**Гистограмма и его роль в коррекции**

**Гистограмма** — это график распределения интенсивностей пикселей изображения. Изучение гистограммы позволяет определить, насколько равномерно распределены яркости и где сосредоточены данные. Для повышения визуального качества изображений часто используют методы гистограммной коррекции, такие как расширение диапазона или равномерное распределение.

### Глава 2.2: Цветокоррекция (Баланс белого, Насыщенность).

**Баланс белого**

**Баланс белого** — это процесс корректировки цветовой температуры изображения для достижения максимально естественной цветопередачи. Разные источники света имеют различную цветовую температуру, измеряемую в кельвинах (К), что влияет на оттенок снимков. Например, лампы накаливания обычно создают теплый желтовато-красный оттенок, а дневной свет — холодный с синим оттенком.

В цифровой обработке баланс белого корректируется путем изменения интенсивности цветовых каналов RGB на основе выбранной точки белого участка изображения.

Математически процесс можно представить как масштабирование каждого цветового канала:

$$ R' = \alpha_R \cdot R, \quad G' = \alpha_G \cdot G, \quad B' = \alpha_B \cdot B $$

где $\alpha_R$, $\alpha_G$, $\alpha_B$ — коэффициенты коррекции, подобранные так, чтобы белый участок в исходном изображении стал серым или белым по восприятию.

**Насыщенность**

**Насыщенность** — характеристика интенсивности или чистоты цвета. Увеличение насыщенности приводит к более ярким и насыщенным цветам, уменьшение — к бледным, менее выразительным.

Работа с насыщенностью осуществляется на основе преобразования цветового пространства. Например, при работе в пространстве HSV (Hue, Saturation, Value) насыщенность задаёт интенсивность цвета. Математически насыщенность *S* регулируется множителем *k*:

$$ S' = k \cdot S $$

где $k > 1$ увеличивает насыщенность, $0 < k < 1$ уменьшает, а $k = 1$ оставляет без изменений.

## Раздел 3: Геометрические преобразования
### Глава 3.1: Масштабирование и изменение размера

**Масштабирование** является одной из основных геометрических операций редактирования изображений, позволяющей изменять размеры исходного изображения с сохранением или перераспределением информации о пикселях.

    > Масштабирование — пропорциональное изменение размеров изображения (ширины и высоты) с сохранением соотношения сторон.
    
    > Изменение размера — может включать в себя изменение ширины и высоты с сохранением или изменением пропорций.


Математическое описание. Обозначим исходное изображение как $I(x, y)$, где $x, y$ — координаты пикселя, а $I'(x', y')$ — масштабированное изображение.

Для масштабирования с коэффициентом $s$ координаты преобразуются следующим образом:

$$ x' = s \cdot x, \quad y' = s \cdot y $$

При изменении размеров с разными коэффициентами для ширины $s_x$ и высоты $s_y$:

$$ x' = s_x \cdot x, \quad y' = s_y \cdot y $$

**Методы интерполяции**

Для заполнения новых координат изображения используются различные методы интерполяции:

1.	**Ближайший сосед** — самый простой метод, при котором каждому новому пикселю присваивается значение ближайшего исходного пикселя. Быстрый, но может создавать ступенчатые и размытие края.
2.	**Билинейная интерполяция** — усреднение четырёх соседних пикселей, что обеспечивает более гладкий результат.
3.	**Бикубическая интерполяция** — учитывает 16 соседних пикселей, давая лучшую гладкость и качество, особенно при увеличении.

**Практические аспекты**

При уменьшении изображения (уменьшении масштаба) возможно потеря детали и появление эффекта муара, поэтому рекомендуется использование фильтров для снижения артефактов. При увеличении масштабирования важно учитывать, что избыточное увеличение приводит к потере четкости.

### Глава 3.2: Поворот, кадрирование, отражение

**Поворот изображения**

**Поворот** — это преобразование, при котором все точки изображения смещаются по круговой траектории вокруг заданного центра вращения. Обычно этим центром служит середина изображения.

Математически поворот на угол $\theta$ задаётся формулами:

$$
x' = (x - x_c) \cos \theta - (y - y_c) \sin \theta + x_c
$$

$$
y' = (x - x_c) \sin \theta + (y - y_c) \cos \theta + y_c
$$

где $(x_c, y_c)$ — координаты центра вращения, $(x, y)$ и $(x', y')$ — исходные и новые координаты пикселя.

**Особенности реализации**

— При $\theta \neq 90^\circ, 180^\circ, 270^\circ$ размеры изображения могут изменяться, так как повернутое изображение занимает больше/меньше места.

— Для новых координат обычно применяется интерполяция (билинейная или бикубическая).

— Часто изображение задаётся сеткой целочисленных координат; после поворота пиксели могут иметь дробные координаты, что требует расчёта цвета по соседним пикселям.


При повороте изображения на произвольный угол его габариты изменяются.
Например, если повернуть прямоугольное изображение на 45°, то оно уже не поместится в исходный прямоугольник без обрезания.

Поэтому часто создают новое изображение большего размера, чтобы в нём полностью разместилось повернутое исходное.

Пусть исходное изображение имеет ширину $W$ и высоту $H$. При повороте на угол $\theta$ (в радианах) новые размеры $W'$ и $H'$ вычисляются так:

$$
W' = W \cdot |\cos \theta| + H \cdot |\sin \theta|
$$

$$
H' = W \cdot |\sin \theta| + H \cdot |\cos \theta|
$$

Это обеспечивает, что повернутое на угол $\theta$ изображение целиком умещается в новом холсте без обрезки.

**Кадрирование**

Кадрирование позволяет вырезать из изображения прямоугольную область с заданными краями:

$$
x \in [x_{\text{min}}, x_{\text{max}}], \quad y \in [y_{\text{min}}, y_{\text{max}}]
$$

Кадрирование уменьшает или изменяет композицию изображения. Для сохранения информации важно правильно задать координаты рамки. Практическое применение — удаление ненужных участков и подготовка изображения к печати или публикации.

**Отражение**

**Отражение** — это важное геометрическое преобразование, которое позволяет получить зеркальное отображение изображения относительно выбранной оси или произвольной прямой. В вашем учебном пособии подробно описаны основные виды отражений и их практическое применение, а также математические формулы.

1. **Горизонтальное отражение**

*Описание*: Изображение переворачивается относительно горизонтальной оси, то есть верх становится низом.

*Визуально*: верхняя часть изображения становится нижней.

*Применение*: зеркальные эффекты, переворот сцены сверху вниз.

**Горизонтальная ось Y***

$$
x' = x, \quad y' = H - 1 - y
$$

где $W$, $H$ — ширина и высота изображения, $(x, y)$ — координаты исходного пикселя, $(x', y')$ — координаты пикселя после отражения.

2. **Вертикальное отражение**
   
*Описание*: Отражение относительно вертикальной оси.

*Визуально*: левый край становится правым.

*Применение*: создание зеркальных эффектов, исправление ориентации объектов, симметричные композиции.

**Вертикальная ось X**

$$
x' = W - 1 - x, \quad y' = y
$$

где $W$, $H$ — ширина и высота изображения, $(x, y)$ — координаты исходного пикселя, $(x', y')$ — координаты пикселя после отражения.

3. **Произвольная ось отражения**
   
*Описание*: Отражение относительно произвольной прямой, не совпадающей с осями координат.

*Техника*: преобразование происходит через поворот системы координат так, чтобы ось отражения стала одной из осей, затем применяется отражение, и система возвращается в исходное положение.

Произвольная прямая

Отражение можно записать в виде аффинной матрицы, если прямая имеет наклон $m$ и проходит через начало координат:
Для произвольной прямой требуется сдвиг и возврат к исходной системе координат.

$$
\mathbf{x}' = \frac{1}{1 + m^2} \begin{bmatrix} 1 - m^2 & 2m \\ 2m & m^2 - 1 \end{bmatrix} \mathbf{x}
$$

## Раздел 4: Основы работы в растровых редакторах
### Глава 4.1: Интерфейс и базовые понятия (Слои, Инструменты)

**Основные компоненты интерфейса растрового графического редактора**

1.	**Рабочая область**. Центральная часть интерфейса, предназначенная для просмотра и непосредственного редактирования изображения. Именно здесь отображается текущий холст или документ. Пользователь может изменять масштаб изображения, перемещаться по холсту, просматривать слои.

2.	**Панель инструментов**. Обычно располагается слева (Adobe Photoshop, GIMP, Paint.NET) или сверху. Включает базовые инструменты:
— Кисть, карандаш, аэрограф.

— Ластик.

— Инструменты выделения (прямоугольная область, лассо, быстрая маска и др.).

— Заливка, градиент, пипетка.

— Текстовые инструменты и т.д.

3.	**Палитра слоёв**

Позволяет работать с несколькими слоями — независимыми уровнями изображения, располагающимися друг над другом. Каждый слой может содержать отдельные элементы композиции, корректироваться, быть видимым или скрытым, иметь индивидуальную прозрачность, стили наложения и маски.

6.	**Панели настройки инструментов**

Изменяют параметры выбранного инструмента: размер кисти, жёсткость, прозрачность, форма наконечника, параметры выделения и прочие опции.

8.	**Меню управления**

Содержит доступ к основным функциям: создание, открытие, сохранение и экспорт изображений, настройка цветов, фильтры, история изменений, макросы.

Слои представляют собой отдельные плоскости (растр или прозрачные области), из которых составляется итоговое изображение. Позволяют организовать нелинейное редактирование, группировку элементов, работу с масками, текстом, фильтрами без разрушения исходных данных.

**Инструменты делятся на:**

— **Графические** (кисть, карандаш, заливка, градиент, ластик)

— **Редактирующие** (выделение, перемещение, трансформация, кадрирование)

— **Текстовые**

— **Навигационные** (лупа, рука)

— **Служебные** (пипетка цвета, палитры, история)

### Глава 4.2: Техники выделения и маскирования

1. **Прямоугольное и эллиптическое выделение**

Позволяют быстро выделить области в форме прямоугольника или эллипса. Применяются для работы с элементами правильной формы, копирования, перемещения, а также быстрой обработки изображений с четкими границами.

2. **Инструменты лассо**

Позволяют рисовать произвольные выделения.

**Обычное лассо**: свободное движение для создания сложных контуров.

**Многоугольное лассо**: выделение с помощью прямых линий по точкам.

**Магнитное лассо (Photoshop)**: автоматически "прилипает" к краям объектов с контрастом, облегчая выделение сложных объектов.

3. **Волшебная палочка**

Автоматически выделяет области с похожим цветом и яркостью. Подходит для быстрой изоляции однотонных объектов или фона. Уровень чувствительности регулирует диапазон выделяемых цветов.

4. **Быстрая маска**

Позволяет временно скрывать/выделять части изображения через рисование кистью по маске. Быстрая маска превращается в выделение и обратно, давая гибкий контроль над областью редактирования.

**Режимы работы с выделениями**
1. **Новое выделение**: создание одной выделенной области.

2. **Добавление к выделению**: объединение нескольких областей.

3. **Вычитание из выделения**: исключение участка из выделения.

4. **Пересечение выделений**: создание области пересечения двух выделений.

**Техники маскирования**

1. **Слоевые маски.** Позволяют частично или полностью скрывать содержимое слоя, работают по принципу черно-белой маски: чёрное — прозрачное, белое — видимое, оттенки серого — полупрозрачные области.

2. **Клиповые маски.** Связывают видимость одного слоя с содержимым другого, что используется для неразрушающего ретуширования, симуляции света/тени, цветокоррекции.

### Глава 4.3: Ретушь и восстановление.

Ретушь в растровых редакторах направлена на улучшение внешнего вида изображений путем устранения дефектов, улучшения текстуры и восстановления поврежденных участков. Типичные задачи:

1. Устранение пятен, царапин, морщин.

2. Восстановление деталей после повреждений.

3. Коррекция тональных и цветовых недостатков.

4. Улучшение текстуры кожи на портретах.

5. Отбеливание зубов, устранение эффекта красных глаз.

**Основные инструменты и техники**

1.	**Инструмент клонирования**. Позволяет копировать участок с одного места изображения на другое. Используется для точечного исправления дефектов без видимых переходов.

2.	**Восстанавливающая кисть**. Аналогично клонированию, но автоматически подстраивает текстуру, цвет и освещение для естественного результата.

3.	**Размытие и резкость**. Для смягчения резких границ, уменьшения шумов или, наоборот, повышения детализации.

4.	**Инструменты Осветлитель и Затемнитель**. Позволяют локально осветлять или затемнять области, что используется для коррекции светотени и улучшения объема.

5.	**Частотное разложение**. Современный метод, при котором изображение разделяется на два слоя: текстурный и тоновый, что позволяет отдельно работать с кожей и другими деталями.

**Рекомендуемые практики**

— Работать на копиях слоев для возможности возврата к исходному состоянию.

— Использовать маски слоев для неразрушающего редактирования.

— Обрабатывать с увеличением (zoom), особенно при работе с мелкими дефектами (1-4 пикселя).

— Применять инструменты локально, избегая слишком больших штрихов для естественного результата.

## Раздел 5: Основы работы в векторных редакторах
## Глава 5.1: Принципы и инструменты векторной графики

1.	**Перо**.Главный инструмент для создания и редактирования контуров. Позволяет рисовать прямые и кривые сегменты (кривые Безье) с высокой точностью, управляя узлами и направляющими ручками. Используется для создания сложных и детализированных форм, как замкнутых, так и открытых.

2.	**Фигура**.
Набор инструментов для быстрой постановки базовых геометрических форм:
— Прямоугольник  и квадрат с возможностью скругления углов.
— Эллипс  и окружность.
— Многоугольник с регулируемым числом сторон.
Эти инструменты служат основой для построения сложных объектов.

3.	**Инструмент Выделения**.
Позволяет выбирать, перемещать и масштабировать объекты целиком.

4.	**Прямое выделение**.
Работа с отдельными узлами и сегментами кривых внутри объекта для тонкой ручной коррекции форм.

5.	**Текст**.
Добавление текстовых объектов с возможностью последующего форматирования шрифтов, стилей, создания текста по контуру и трансформаций.

6.	**Заливка и обводка**.
Настройка цвета, градиентов, узоров внутренней заливки объекта и цвета, толщины, стиля обводки (контура).

7.	**Градиенты и узоры**.
Позволяют задавать плавные цветовые переходы и текстурные заполнения для придания объёмности и глубины объектам.

8.	**Инструменты трансформации**.
Включают перемещение, масштабирование, поворот, отражение и искажение объектов векторной графики с точным управлением параметрами.

9.	**Инструменты работы с узлами**.
Дают возможность добавлять, удалять, смещать узлы, управлять кривизной и гладкостью сегментов.

**Дополнительные возможности**

Работа со слоями и группами для удобства организации сложных изображений.

Пути и их объединение: инструменты для логических операций над объектами – объединение, пересечение, вычитание.

Маски и клиппинг для создания сложных светотеневых и композиционных эффектов.

### Глава 5.2: Создание и редактирование контуров

1.	**Инструмент «Перо»**.
Это основной инструмент для построения точных и сложных контуров. Он позволяет размещать узловые точки (узлы) и соединять их кривыми Безье, регулируя форму и кривизну сегментов. Инструмент широко используется для создания сложных фигур, трассировки изображений, логотипов и иллюстраций.

Для создания кривых используется управление направляющими ручками, соединяющими узлы.

2.	**Инструмент «Свободное перо»**.
Позволяет рисовать контуры свободной формой, к которому программа автоматически добавляет узлы по мере рисования. Этот инструмент удобен для быстроотрисованных, органичных линий и кривых, без необходимости точного управления узлами и ручками.

3.	**Инструменты добавления и удаления узлов**.

«Добавить опорную точку»: позволяет вставлять новые узлы в существующую кривую.

«Удалить опорную точку»: удаляет существующие узлы, делая контур проще и гладче.

4.	**Инструмент «Преобразование узлов»**.
Позволяет менять узлы из кривых в угловые или гладкие, регулируя характер изгиба сегментов. Это важно для точной настройки формы кривых Безье.

5.	**Инструменты для работы с фигурами и путями**.
Например, создание замкнутых контуров при помощи инструментов для рисунка прямоугольников, эллипсов, многоугольников, звёзд и других фигур. Векторные редакторы позволяют комбинировать и редактировать контуры, объединяя их в сложные формы.

6.	**Инструменты трансформации и редактирования**.
Масштабирование, поворот, отражение, искажение и перемещение контура, что позволяет создавать композиционные и дизайнерские решения.

## Раздел 6: Композиция и подготовка к публикации
### Глава 6.1: Работа со слоями и текстом.

В векторных и растровых редакторах слои — это основа организации и управления элементами композиции. Они позволяют отдельно размещать объекты, текст, изображения и эффекты, что существенно упрощает редактирование и корректировку.

1. Слои позволяют изменять порядок отображения элементов, менять их видимость и прозрачность, группировать для совместного перемещения и трансформации.

2. Текстовые слои позволяют добавлять и редактировать текст, его форматирование, стиль, расположение. Текстовые объекты могут быть отдельными элементами или частью более сложного дизайна.

3. Текст и слои помогают создавать многослойные композиции, удобные для анимации, презентаций и публикации.

### Глава 6.2: Экспорт и выбор форматов файлов

Выбор формата для экспорта зависит от задач и конечной платформы:

1. **Векторные форматы** (SVG, AI, EPS, PDF) применяются для сохранения масштабируемых изображений без потери качества, подходят для печати, веб-дизайна, технической документации.

2. **Растровые форматы** (PNG, JPEG, TIFF, BMP) используются для фотографий и сложных изображений с эффектами. PNG поддерживает прозрачность, JPEG — компрессию с потерями.

3. **Специализированные форматы*** (PSD, XCF) сохраняют слои и служат для дальнейшей работы с файлами в родных редакторах.

При экспорте важно учитывать разрешение, цветовое пространство и параметры сжатия, чтобы сохранить качество и соответствовать требованиям публикации.
















