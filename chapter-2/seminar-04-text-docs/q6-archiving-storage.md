# Основы долговременного хранения и архивации текстовых ресурсов

### 1. Стратегии долговременного сохранения: миграция, обновление, эмуляция

Цифровые технологии развиваются стремительно. Оборудование устаревает, программное обеспечение становится недоступным, форматы файлов выходят из употребления. Для сохранения доступности текстовых ресурсов на протяжении десятилетий и столетий применяются различные стратегии.

**Обновление носителя (Refreshment)** — это самая простая из всех стратегий. Данные физически не меняются и не конвертируются, однако периодически (обычно каждые 5-10 лет) они копируются со старых, деградирующихся носителей информации на новые. Например, данные с магнитных лент LTO (Linear Tape-Open) третьего поколения копируются на ленты пятого поколения до того, как старые ленты выйдут из строя.

Преимущества:
- Самый простой в реализации подход
- Не требует изменения самих данных
- Относительно дешев
- Не требует глубокого понимания формата данных

Недостатки:
- Не решает проблему устаревания форматов
- Требует регулярного мониторинга и переноса данных
- В конечном итоге может потребоваться переход на другие носители, которые больше не поддерживаются

**Миграция формата (Format Migration)** — это перевод данных из одного формата в другой. Например, документ в формате .doc (Microsoft Word 97-2003) конвертируется в PDF или PDF/A для долговременного хранения. Это решает проблему форматного устаревания.

Существует три типа миграции:

1. **Миграция версии (Version Migration)**: обновление документа на новую версию того же формата. Например, .doc → .docx.

2. **Миграция программного обеспечения (Software Migration)**: переход на другое приложение, которое поддерживает похожие форматы.

3. **Миграция формата (Format Migration)**: полная смена формата с целью обеспечить совместимость с будущими системами.

Процесс:
1. Определить целевой формат (обычно стандартизированный и открытый)
2. Использовать инструменты конвертации
3. Проверить целостность и точность конвертированных данных
4. Хранить метаданные о процессе миграции

Преимущества:
- Решает проблему форматного устаревания
- Обеспечивает совместимость с современными системами
- Улучшает доступность данных для обычных пользователей

Недостатки:
- Риск потери данных или функциональности при конвертации
- Трудоемко и требует экспертизы
- Может привести к неточностям (особенно при сложных форматах)
- Может потребоваться многократная миграция (каскадная миграция)

**Эмуляция (Emulation)** — это совершенно другой подход. Вместо изменения самих данных, система создает виртуальное окружение, которое имитирует оригинальное аппаратное обеспечение или программное обеспечение. Например, для просмотра документа, созданного в WordPerfect 5.1 на Commodore 64, можно создать эмулятор этой системы, который работает в современной операционной системе.

Преимущества:
- Сохраняет исходный «вид и ощущение» оригинального документа
- Оригинальные данные (битовый поток) остаются неизменными
- Может применяться к огромному диапазону объектов одновременно
- Полностью передает функциональность оригинального приложения

Недостатки:
- Требует значительного технического мастерства и ресурсов
- Нужно создавать эмулятор для каждой комбинации ОС и ПО
- Вопросы интеллектуальной собственности: может быть сложно получить права на эмулирование лицензионного ПО
- Неясно, будут ли будущие системы поддерживать эмуляторы
- Очень дорого в долгосрочной перспективе

**Гибридный подход:** На практике организации часто комбинируют эти стратегии. Например:
- Для критически важных документов может применяться эмуляция для сохранения оригинального внешнего вида
- Одновременно создается мигрированная версия для обеспечения доступности
- Используется refreshment для обновления носителей хранения

### 2. Форматы долговременного хранения: PDF/A, XML и открытые стандарты

Выбор формата хранения — это один из самых критических решений при создании цифрового архива. Формат должен быть стабильным, хорошо задокументированным и желательно открытым.

**PDF/A** — это семейство стандартов, определённых ISO 19005 специально для долговременного архивирования электронных документов.

История развития:
- **PDF/A-1** (ISO 19005-1:2005): основана на PDF версии 1.4, опубликована в 2005 году
- **PDF/A-2** (ISO 19005-2:2011): расширенная версия на базе PDF 1.7, позволяет встраивать PDF/A-совместимые вложения
- **PDF/A-3** (ISO 19005-3:2012): добавляет возможность встраивания файлов в любом формате (хотя архивисты дискутируют о целесообразности этого)
- **PDF/A-4** (в разработке): основана на PDF 2.0

Ключевые характеристики PDF/A:

1. **Самодостаточность (Self-containment)**: Все необходимые шрифты, изображения и другие ресурсы встраиваются непосредственно в файл. Это гарантирует, что документ будет выглядеть одинаково независимо от наличия внешних ресурсов.

2. **Детерминированность внешнего вида**: PDF/A фиксирует не только содержание, но и точный способ отображения документа. Запрещены интерактивные элементы, JavaScript и другие динамические компоненты, которые могут изменять внешний вид со временем.

3. **Открытость и стандартизация**: Спецификация PDF/A опубликована как открытый международный стандарт, что гарантирует её долговечность.

4. **Уровни соответствия**:
   - **Level A (Accessible)**: требует полного соответствия всем требованиям, включая логическую структуру документа для обеспечения доступности
   - **Level B (Basic)**: минимальный набор требований, фокусируется на надежном воспроизведении визуального внешнего вида
   - **Level U (Unicode)**: обеспечивает извлечение текста

**XML (eXtensible Markup Language)** — это универсальный язык разметки, который также рекомендуется для долговременного архивирования, особенно для структурированных текстовых данных.

Преимущества XML для архивирования:
- Полностью текстовой формат (не бинарный), что обеспечивает долгосрочную читаемость
- Иерархическая структура хорошо подходит для представления сложных документов
- Открытый стандарт (W3C)
- Легко парсируется и обрабатывается даже с примитивными инструментами
- Поддерживает Unicode, что критично для многоязычных текстов
- Может быть дополнен XML Schema для описания валидной структуры

**Открытые форматы vs. Proprietary форматы:**

Proprietary форматы (например, .docx, .xlsx от Microsoft) представляют риск для долговременного архивирования:
- Производитель может прекратить поддержку формата
- Спецификация может быть изменена без предупреждения
- Требуется лицензионное программное обеспечение для доступа
- Сложность формата затрудняет миграцию

Рекомендуемые форматы для различных типов текстовых ресурсов:

| Тип контента | Предпочтительный формат | Поддерживаемые форматы |
|---|---|---|
| Текстовые документы | PDF/A-1, Plain Text (UTF-8) | PDF, RTF, HTML, SGML |
| Структурированные данные | XML | CSV, Delimited Text, SQL DDL |
| Веб-контент | WARC, ARC | HTML, CSS |
| Электронная корреспонденция | EML, PST | — |

### 3. Проверка целостности данных: контрольные суммы и фиксити

Одна из самых больших угроз для архивированных данных — это неявная коррупция, когда файл повреждается, но это остается незамеченным. Процесс может быть вызван ошибками в аппаратном обеспечении, сбоями в хранилище данных или вирусами.

**Целостность данных (Fixity)** — это уверенность в том, что цифровой файл не был изменён, то есть остался «фиксирован». Это достигается через использование криптографических хеш-функций.

**Контрольная сумма (Checksum)** — это результат математической функции, которая преобразует содержимое файла в строку фиксированной длины. Ключевое свойство: даже минимальное изменение одного бита в файле приведет к полностью другой контрольной сумме.

Наиболее используемые алгоритмы:

1. **MD5**: производит 128-битный хеш (32 символа)
   - Раньше широко применялась, но сейчас не рекомендуется для критических приложений
   - Показаны коллизии (разные файлы с одинаковым MD5)

2. **SHA-1**: производит 160-битный хеш
   - Использовалась долгое время, но также подвергнута успешным атакам
   - Постепенно выводится из использования

3. **SHA-256**: производит 256-битный хеш
   - Часть семейства SHA-2
   - Рекомендуется для новых систем
   - Криптографически стойкая

4. **BLAKE2**: современный алгоритм, быстрее SHA-3

Процесс проверки целостности:

1. **Генерация базовой контрольной суммы**: при поступлении файла в архив вычисляется контрольная сумма и сохраняется вместе с метаданными.

2. **Периодическая проверка (Auditing)**: через определённые интервалы времени (например, ежегодно или ежемесячно) система перевычисляет контрольную сумму текущего файла.

3. **Сравнение**: если новая контрольная сумма не совпадает с оригинальной, это сигнал о том, что файл был повреждён.

4. **Восстановление**: архивы обычно хранят несколько копий (репликация) или используют коды исправления ошибок. Если одна копия повреждена, она может быть восстановлена из неповреждённой копии.

Уровни реализации:

- **Базовый уровень**: генерация контрольных сумм при инжесте, логирование информации
- **Продвинутый уровень**: регулярная проверка целостности, логирование всех изменений
- **Высокий уровень**: автоматическая проверка на файловой системе (например, ZFS, CEPH), система самовосстановления

### 4. Метаданные и стандарт Dublin Core

Метаданные — это данные о данных. Для цифрового архива метаданные критически важны, поскольку они обеспечивают:
- Идентификацию и описание ресурса
- Контроль доступа и прав
- Восстановление информации в будущем
- Подтверждение подлинности

**Dublin Core** — это простой, но мощный стандарт описания метаданных для цифровых ресурсов. Стандарт был разработан на конференции в Дублине, Огайо в 1995 году и впоследствии стандартизирован как ISO 15836.

**15 основных элементов Dublin Core:**

1. **Title**: Название ресурса
2. **Creator**: Человек или организация, ответственные за создание ресурса
3. **Subject**: Тема или ключевые слова
4. **Description**: Описание содержания
5. **Publisher**: Издатель или распространитель
6. **Contributor**: Лицо или организация, сделавшие вклад, но не являющиеся основным создателем
7. **Date**: Дата, обычно дата публикации или создания
8. **Type**: Тип ресурса (text, image, sound и т.д.)
9. **Format**: Медиа-тип или формат файла
10. **Identifier**: Уникальный идентификатор (URL, DOI, UUID)
11. **Source**: Ресурс, из которого был выведен описываемый ресурс
12. **Language**: Язык содержания
13. **Relation**: Связанный ресурс (связь с другими документами)
14. **Coverage**: Пространственное или временное охватывание
15. **Rights**: Информация о правах и лицензировании

**Расширения Dublin Core (Qualified Dublin Core):**

Базовые элементы могут быть уточнены через свойства и подсхемы:
- **Свойства (Refinements)**: например, date.created, date.modified, rights.copyright
- **Схемы кодирования (Encoding Schemes)**: стандартизированные способы представления значений

**Применение в архивах:**

Примеры заполнения элементов Dublin Core для архивированного текстового документа:

```xml
<dc:title>Письма Максимилиана Волошина, 1900-1932</dc:title>
<dc:creator>Волошин, Максимилиан Александрович</dc:creator>
<dc:subject>Русская литература; Переписка; История культуры</dc:subject>
<dc:description>Собрание личной корреспонденции русского поэта и художника с современниками</dc:description>
<dc:publisher>Российский государственный архив</dc:publisher>
<dc:date>1900-01-01</dc:date>
<dc:type>Text</dc:type>
<dc:format>application/pdf</dc:format>
<dc:identifier>urn:uuid:12345678-90ab-cdef-0123-456789abcdef</dc:identifier>
<dc:language>ru</dc:language>
<dc:rights>Авторские права: архив; Доступ: ограниченный доступ исследователям</dc:rights>
```

**Значение для долговременного хранения:**

Без надлежащих метаданных архивированный документ в будущем может стать бесполезным — будущие исследователи не смогут понять, что это такое, откуда он взялся и как его использовать. Метаданные служат «путеводителем» для понимания и использования сохраненного контента.

### 5. Доступность vs. Сохраняемость: две стороны одной медали

Существует тонкое, но критически важное различие между этими двумя концепциями, и они часто конкурируют друг с другом.

**Сохраняемость (Preservation)** фокусируется на долговременном поддержании целостности и аутентичности цифровых объектов. Это означает:
- Гарантировать, что данные не повреждены
- Сохранить историю и контекст объекта
- Поддерживать возможность доказать подлинность и неизменность
- Защитить от несанкционированного доступа и изменений

Примеры мер сохраняемости:
- Хранение в неизменяемом формате (PDF/A, XML, простой текст)
- Создание множественных копий на разных физических местоположениях
- Регулярная проверка целостности через контрольные суммы
- Логирование истории всех операций с объектом (audit trail)

**Доступность (Accessibility)** фокусируется на способности текущих и будущих пользователей фактически прочитать и использовать архивированный контент. Это означает:
- Документ должен быть открываем и читаем
- Должны быть доступны инструменты и программное обеспечение
- Контент должен быть понятен и пригоден к использованию
- Должны быть ясны права доступа и использования

Примеры мер доступности:
- Конвертирование в популярные, легко читаемые форматы
- Создание множественных форматов одного документа (например, оригинальный PDF для сохранения внешнего вида + конвертированный TXT для текстового поиска)
- Предоставление онлайн-интерфейсов для доступа к архивам
- Обеспечение полнотекстового поиска
- Трансформация в веб-дружественные форматы
- Добавление развернутых описаний и контекста

**Конфликты между сохраняемостью и доступностью:**

1. **Формат**: Для максимальной сохраняемости лучше хранить документы в простом, неизменяемом формате (XML, PDF/A). Но пользователи часто ожидают докупить документ в более привычных или полнофункциональных форматах.

2. **Изменения**: Для сохраняемости нежелательна любая модификация оригинального файла. Но для доступности иногда нужно обновлять или конвертировать формат, чтобы он был совместим с современным программным обеспечением.

3. **Метаданные**: Для сохраняемости каждый документ должен содержать полные метаданные о его происхождении, истории и других важных деталях. Но это может усложнить простой доступ.

4. **Копирование**: Для сохраняемости необходимо создавать резервные копии. Но при наличии множества копий возникает риск того, что со временем копии в разных местах могут расходиться.

**Оптимальное решение: принцип "консервации плюс доступность"**

Лучшая практика — это создание отделённых, но связанных версий документа:

- **Архивная версия (Archival Information Package, AIP)**: хранится в самом консервативном формате (PDF/A, XML), с полными метаданными, контрольными суммами, с максимальной репликацией. Это версия «навсегда».

- **Версия доступа (Dissemination Information Package, DIP)**: конвертируется в более удобные форматы, может быть оптимизирована для веб-доступа (HTML, веб-PDF), может содержать рекомендуемые интерпретирующие средства. Это версия для пользователей.

- **Промежуточная версия (Submission Information Package, SIP)**: временный формат, в котором информация поступает в архив. Содержит необходимую информацию для преобразования в AIP.

Этот подход, известный как **модель OAIS (Open Archival Information System)**, стандартизирован как ISO 14721:2012 и обеспечивает баланс между долговременной сохраняемостью и текущей доступностью.