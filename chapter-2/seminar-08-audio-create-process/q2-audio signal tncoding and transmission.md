# МЕТОДЫ КОДИРОВАНИЯ, ДЕКОДИРОВАНИЯ И ПЕРЕДАЧИ АУДИОСИГНАЛОВ

В современном цифровом мире аудиоинформация окружает нас повсюду: от телефонных разговоров и потоковой передачи музыки до подкастов и аудиокниг. Однако для того, чтобы звук, являющийся по своей природе аналоговой волной, мог храниться, обрабатываться и передаваться по цифровым каналам связи, необходимы сложные процессы преобразования.

Эти процессы включают в себя три ключевых этапа: **кодирование** (аналого-цифровое преобразование), **сжатие данных** и **передачу**.

**Декодирование** является обратным процессом, восстанавливающим звук для восприятия человеком.

## 1. КОДИРОВАНИЕ АУДИОСИГНАЛА (АНАЛОГО-ЦИФРОВОЕ ПРЕОБРАЗОВАНИЕ - АЦП)

Процесс преобразования аналогового звукового сигнала (непрерывные изменения напряжения) в цифровую форму (последовательность нулей и единиц) называется **импульсно-кодовой модуляцией (ИКМ, PCM)**.

Он состоит из трех этапов:

### 1.1. Дискретизация (Сэмплирование)

Это процесс измерения амплитуды аналогового сигнала через равные промежутки времени. Частота этих измерений называется **частотой дискретизации** (измеряется в Герцах, Гц).

- **Принцип Найквиста-Шеннона:** для точного восстановления исходного сигнала частота дискретизации должна быть как минимум **вдвое выше максимальной частоты в спектре сигнала**. Поскольку человеческое ухо слышит звуки до 20 кГц, стандартная частота дискретизации для аудио-CD составляет 44.1 кГц. Это гарантирует, что весь слышимый диапазон будет захвачен без потерь.

- **Примеры частот дискретизации:**
  - **8 кГц:** Телефония (достаточно для речи с полосой до 4 кГц)
  - **44.1 кГц / 48 кГц:** Стандарт для потребительского аудио (музыка, фильмы)
  - **96 кГц / 192 кГц:** Высококачественные студийные записи и аудиофильские форматы

### 1.2. Квантование

На этом этапе каждому измеренному значению амплитуды присваивается конкретное цифровое значение из конечного набора. Точность этого присвоения определяется **разрядностью** (битностью).

- Если разрядность составляет **n** бит, то доступно **2ⁿ** возможных уровней квантования. Чем выше разрядность, тем точнее представление амплитуды и меньше **шум квантования**

- **Примеры разрядности:**
  - **8 бит:** 256 уровней. Низкое качество
  - **16 бит:** 65 536 уровней. Стандарт для аудио-CD (динамический диапазон ~96 дБ)
  - **24 бита:** 16.7 миллионов уровней. Профессиональный стандарт (динамический диапазон примерно 144 дБ)

### 1.3. Кодирование

Финальный шаг АЦП — преобразование квантованных значений в двоичный код. *Например, значение амплитуды "150" при 8-битном кодировании может быть представлено как 10010110.*

**Результат АЦП:** получается исходный цифровой аудиопоток (PCM), который является "сырым" и занимает много места. *Например, стерео сигнал с 44.1 кГц и 16 бит занимает около 176 Кбайт в секунду.*

## 2. СЖАТИЕ АУДИОДАННЫХ (КОМПРЕССИЯ)

Прямая передача или хранение PCM-данных неэффективна. Для уменьшения объема данных применяется сжатие.

Существует два основных типа компрессии:

### 2.1. Сжатие без потерь (Lossless)

Алгоритм сжимает данные таким образом, что при декомпрессии восстанавливается исходный PCM-сигнал **бит в бит**.

- Устраняется избыточность данных (например, повторяющиеся последовательности или тишина) без потери информации
- Используются алгоритмы, аналогичные ZIP-архивации, но оптимизированные для аудио (например, предиктивное кодирование)
- **Примеры форматов:** FLAC (Free Lossless Audio Codec), ALAC (Apple Lossless Audio Codec), WAV (контейнер для несжатого PCM)
- **Коэффициент сжатия:** обычно 2:1 или 3:1
- **Применение:** аудиофилы, архивация, профессиональная звукозапись

### 2.2. Сжатие с потерями (Lossy)

Алгоритм **безвозвратно удаляет часть аудиоинформации**, которую, как считается, человеческое ухо с большой вероятностью не услышит или воспримет с меньшей важностью. Это позволяет достичь гораздо большего коэффициента сжатия.

- Используется модель **психоакустики** — науки о восприятии звука человеком
  - Громкий звук на определенной частоте делает тихие звуки на близких частотах неслышимыми
  - Определяет минимальную громкость звука на каждой частоте, которую может услышать ухо. Все, что ниже этого порога, удаляется
- Исходный сигнал разбивается на частотные компоненты (с помощью преобразования Фурье), и кодировщик решает, какие из них можно отбросить, исходя из психоакустической модели
- **Примеры форматов:** MP3, AAC (Advanced Audio Coding), Ogg Vorbis, Opus
- **Коэффициент сжатия:** может достигать 10:1 и более с приемлемым качеством
- **Применение:** потоковая передача музыки, интернет-радио, цифровые аудиоплееры

## 3. ДЕКОДИРОВАНИЕ АУДИОСИГНАЛА

Декодирование — это процесс, обратный кодированию и сжатию. Он происходит на стороне приемника.

### 3.1. Декомпрессия

- Для **Lossy-форматов:** сжатые данные распаковываются в PCM-поток. Важно понимать, что удаленная при сжатии информация **не восстанавливается**. Получаемый PCM-сигнал является приближенной, но воспринимаемо близкой копией оригинала
- Для **Lossless-форматов:** данные восстанавливаются в исходный PCM-сигнал без каких-либо изменений

### 3.2. Цифро-Аналоговое Преобразование (ЦАП)

Это ключевой этап, который превращает цифровой поток обратно в аналоговый сигнал.

- **Принцип:** ЦАП принимает последовательность двоичных чисел (значения амплитуды) и через равные промежутки времени (соответствующие частоте дискретизации) генерирует напряжение, пропорциональное этому числу
- **Сглаживающий фильтр (фильтр восстановления):** на выходе ЦАП получается "ступенчатый" сигнал. Сглаживающий фильтр (низкочастотный) убирает эти высокочастотные ступеньки, оставляя гладкую аналоговую волну, которая и подается на усилитель и акустическую систему

## 4. ПЕРЕДАЧА АУДИОСИГНАЛОВ

После кодирования и сжатия цифровой аудиопоток готов к передаче. Методы передачи сильно различаются.

### 4.1. Цифровая передача по проводам и в сети

- **Интернет-потокинг:** использует протоколы реального времени (например, RTP/RTCP поверх UDP/TCP). Современные кодеки, такие как **Opus** и **AAC**, обеспечивают высокое качество при низкой битрейтности и устойчивости к потерям пакетов. Адаптивное потоковое вещание (HLS, DASH) автоматически понижает или повышает качество звука, чтобы он не прерывался при плохом интернете.
  - **S/PDIF (Sony/Philips Digital Interface):** передает сжатый (например, Dolby Digital) или несжатый цифровой звук по коаксиальному или оптическому кабелю
  - **HDMI:** передает многоканальное аудио высокого разрешения вместе с видео
  - **USB:** используется для подключения ЦАП, аудиоинтерфейсов и передачи данных

### 4.2. Беспроводная передача

- **Bluetooth:** самый распространенный метод для носимых устройств
  - **Кодеки Bluetooth:** качество сильно зависит от используемого кодека
    - **SBC (Subband Codec):** базовый, обязательный кодек, качество среднее
    - **AAC:** лучшее качество для устройств Apple
    - **aptX, aptX HD:** кодеки от Qualcomm, предлагающие улучшенное качество и снижение задержки
    - **LDAC:** кодек от Sony, обеспечивающий передачу аудио высокого разрешения с очень высоким битрейтом
    - **LC3 (Low Complexity Communication Codec):** новый кодек для LE Audio, более эффективный, чем SBC

- **Wi-Fi:** позволяет передавать аудио без сжатия или с Lossless-сжатием (например, через технологию AirPlay 2 от Apple или Chromecast от Google), так как имеет большую пропускную способность и радиус действия по сравнению с Bluetooth


Цепочка "кодирование - сжатие - передача - декодирование" представляет собой сложную систему, которая делает возможным современное цифровое аудио. От точности АЦП и психоакустических моделей в Lossy-кодеках до эффективности алгоритмов сжатия и пропускной способности беспроводных протоколов — каждый этап является результатом компромисса между качеством звука, объемом данных и требованиями к каналу связи.
